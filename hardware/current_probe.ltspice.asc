Version 4
SHEET 1 1580 680
WIRE -288 -368 -288 -400
WIRE -288 -240 -288 -288
WIRE 608 -240 176 -240
WIRE -160 -144 -384 -144
WIRE 256 -128 256 -144
WIRE 176 -112 176 -240
WIRE 224 -112 176 -112
WIRE 368 -96 288 -96
WIRE 464 -96 432 -96
WIRE 608 -96 608 -240
WIRE 608 -96 544 -96
WIRE 736 -96 608 -96
WIRE -160 -80 -160 -144
WIRE 224 -80 -160 -80
WIRE -384 -48 -384 -144
WIRE -160 -48 -160 -80
WIRE 256 -48 256 -64
WIRE 608 -16 608 -96
WIRE 608 -16 544 -16
WIRE 672 -16 608 -16
WIRE 544 16 544 -16
WIRE 672 16 672 -16
WIRE 64 64 64 48
WIRE -160 80 -160 32
WIRE -64 80 -160 80
WIRE -384 128 -384 32
WIRE -160 128 -160 80
WIRE -160 128 -384 128
WIRE 544 128 544 80
WIRE 608 128 544 128
WIRE 672 128 672 96
WIRE 672 128 608 128
WIRE -64 160 -64 80
WIRE 64 160 64 144
WIRE 64 160 -64 160
WIRE 608 160 608 128
WIRE 64 176 64 160
WIRE 64 288 64 256
FLAG -288 -240 0
FLAG 64 288 0
FLAG 256 -48 0
FLAG 608 160 0
FLAG 256 -144 3V3
FLAG -288 -400 3V3
FLAG 736 -96 to_ADC
FLAG 64 48 3V3
SYMBOL current -384 32 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName current_probe
SYMATTR Value SINE(0 25m 50 0 0 0 100)
SYMBOL res -176 -64 R0
SYMATTR InstName R1
SYMATTR Value 15R
SYMBOL voltage -288 -384 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vdd
SYMATTR Value 3.3
SYMBOL res 48 48 R0
SYMATTR InstName R3
SYMATTR Value 20k
SYMBOL res 48 160 R0
SYMATTR InstName R4
SYMATTR Value 3k3
SYMBOL Opamps\\UniversalOpamp2 256 -96 R0
SYMATTR InstName LM324
SYMBOL res 656 0 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL polcap 528 16 R0
SYMATTR InstName C1
SYMATTR Value 1000µ
SYMBOL diode 368 -80 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res 560 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100R
TEXT -376 264 Left 2 !.tran 0 10s 0s 30u
